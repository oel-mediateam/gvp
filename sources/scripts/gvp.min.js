document.createElement("video"),document.createElement("audio"),document.createElement("track"),$(document).ready(function(){function e(e){var t="[\\?&]"+e+"=([^&#]*)",i=new RegExp(t),o=i.exec(window.location.href);return e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]"),null===o?"":decodeURIComponent(o[1].replace(/\+/g," "))}function t(e){var t=e,i=t.split(" "),o,r,n,s=[],d;for(n=0;n<i.length;n++)o=i[n].substring(0,1).toUpperCase(),r=i[n].substring(1),s[n]=o+r;return d=s.join(" ")}function i(){""!==$.trim(e("ttl"))&&$(".title_bar").html(t($.trim(e("ttl")))),""!==$.trim(e("intro"))&&Number($.trim(e("intro")))&&(h=$.trim(e("intro"))),""!==$.trim(e("w"))&&(l=Number($.trim(e("w")))),""!==$.trim(e("h"))&&(m=Number($.trim(e("h"))))}function o(){var e=window.location.href,t;t=e.split("?"),t=t[0].split("/"),t=t[t.length-2],f=t}function r(){$(".video_holder").html('<video id="gvp_video" class="video-js vjs-default-skin" controls preload="metadata" poster="'+f+'.jpg"></video>'),videojs("gvp_video",{},function(){u=this,this.width(l),this.height(m),this.src([{type:"video/mp4",src:"https://mediastreamer.doit.wisc.edu/uwli-ltc/media/intro_videos/"+h+".mp4"},{type:"video/webm",src:"https://mediastreamer.doit.wisc.edu/uwli-ltc/media/intro_videos/"+h+".webm"}])}),u.on("error",function(){var e=a(h,"mp4","video/mp4"),t=a(h,"webm","video/webm");e===!1&&this.src([{type:"video/webm",src:f+".webm"}]),t===!1&&this.src([{type:"video/mp4",src:f+".mp4"}]),t===!1&&e===!1&&(this.dispose(),$(".video_holder").html('<p class="error">Video Error: intro video not found!<small>Intro video code '+h+' is not found or does not exist on the centralized location. Please double check the intro video code table for the correct intro video number.</small></p><p class="error">If you see this message, both MP4 and WebM are not found.</p>'))}),u.on("ended",function(){this.dispose(),n()})}function n(e){("undefined"==typeof e||null===typeof e)&&(e=!1);var t=a(f,"vtt","text/vtt")?t='<track src="'+f+'.vtt" kind="subtitles" srcland="en" label="English" default />':"";$(".video_holder").html(e?'<video id="gvp_video" class="video-js vjs-default-skin" controls poster="'+f+'.jpg">'+t+"</video>":'<video id="gvp_video" class="video-js vjs-default-skin" controls> '+t+" </video>"),videojs("gvp_video",{},function(){v=this,this.progressTips(),this.width(l),this.height(m),this.src([{type:"video/mp4",src:f+".mp4"},{type:"video/webm",src:f+".webm"}]),h&&this.play()}),v.on("error",function(){var e=a(f,"mp4","video/mp4"),t=a(f,"webm","video/webm");e===!1&&this.src([{type:"video/webm",src:f+".webm"}]),t===!1&&this.src([{type:"video/mp4",src:f+".mp4"}]),e===!1&&t===!1&&(this.dispose(),$(".video_holder").html('<p class="error">Video Error: video not found!<small>Video file "<strong>'+f+'</strong>" is not found. Please double check the video file name. The file name must match the directory name.</small></p><p class="error">If you see this message, both MP4 and WebM are not found.</p>'))}),v.on("ended",function(){this.currentTime(0),$(".vjs-poster").delay(6e3).queue(function(){$(this).css("background-image","url("+f+".jpg)").html('<span class="replay-button"></span>').show()})})}function s(e,t){var i;"pdf"===t?i="application/pdf":"mp3"===t?i="audio/mpeg":"mp4"===t&&(i="video/mp4"),$.ajax({url:e+"."+t,type:"HEAD",dataType:"text",contentType:i,async:!1,beforeSend:function(e){e.overrideMimeType(i),e.setRequestHeader("Accept",i)},success:function(){var i=e,o=$("#download_bar ul");if("http:"!==location.protocol){var r=window.location.href;r=r.substr(0,r.lastIndexOf("/")+1).replace("https","http"),i=r+e}"pdf"===t?o.append('<li><a href="'+i+"."+t+'" target="_blank">Transcript</a></li>'):"mp3"===t?o.append('<li><a href="'+i+"."+t+'" target="_blank">Audio</a></li>'):"mp4"===t&&o.append('<li><a href="'+i+"."+t+'" target="_blank">Video</a></li>')},error:function(){}})}function d(){s(f,"mp4"),s(f,"mp3"),s(f,"pdf")}function a(e,t,i){var o=!1;return $.ajax({url:e+"."+t,type:"HEAD",dataType:"text",contentType:i,async:!1,beforeSend:function(e){e.overrideMimeType(i),e.setRequestHeader("Accept",i)},success:function(){o=!0},error:function(){o=!1}}),o}function c(){var e=navigator.userAgent,t={ios:e.match(/(iPad|iPhone|iPod)/g),blackberry:e.match(/BlackBerry/),android:e.match(/Android/),window:e.match(/IEMobile/)};return t.ios||t.blackberry||t.android?!0:!1}function p(){if(window.self===window.top){var i=new Date,o=location.href,s="";$.each(w,function(e){return w[e]===o.split("/")[4]?(s="msmgt"===w[e]?"smgt":w[e],!1):void(s="default")}),$("head").append('<link href="https://mediastreamer.doit.wisc.edu/uwli-ltc/media/video_players/gvp_v3/sources/theme/'+s+'.css" rel="stylesheet" type="text/css" />'),$(".gvp_wrapper").prepend('<div class="logo"></div>'),$(".gvp_wrapper").append('<div class="footer">Copyright &copy; '+i.getFullYear()+". University of Wisconsin System. All rights reserved.</div>")}$(document).attr("title",$(".title_bar").html().length<=0?t($.trim(f.replace(/\_+/g," "))):$(".title_bar").html()),$(".gvp_wrapper").css({width:l+"px",height:m+"px"}),$(".title_bar").css("width",l-30+"px"),!c()||0!==e("m")&&""!==e("m")?(h?r():n(!0),$(".video_holder").click(function(){parent!==top&&$(".title_bar").hide()})):$(".video_holder").css({"background-image":"url("+f+".jpg)",width:l+"px",height:m+"px",cursor:"pointer"}).html('<span class="newWindow-button"></span>').on("click",function(){var e=window.location.href;e=e.replace("https","http").replace(/intro=[0-9]+/g,"intro=0"),e+=window.location.search?"&m=1":"?m=1",window.open(e)})}var l=640,m=360,h=0,u,v,f,w=["smgt","msmgt","hwm","himt","bps","il","flx"];i(),o(),p(),d()});